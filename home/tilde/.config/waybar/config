// WAYBAR CONFIG - MINIMALIST DUAL-MONITOR

[
  // Monitor 1: DP-1 (Primary)
  {
    "output": "HDMI-A-1",
    "layer": "top",
    "position": "top",
    "height": 30, // ИЗМЕНЕНИЕ: Увеличение высоты для устранения сжатия

    "modules-left": ["hyprland/workspaces"],
    "modules-center": ["hyprland/window"],
    "modules-right": ["custom/btc", "custom/country", "hyprland/language", "custom/ping", "custom/weather", "memory", "cpu", "clock"],

    "hyprland/workspaces": {
      "format": "{}",
      "format-window": "{class} {title}",
      "on-click": "activate",
      "all-outputs": true,
      "persistent-workspaces": {
        "HDMI-A-1": [1, 2, 3],
        "DP-1": [4, 5, 6]
      },
      "format-icons": {
        "1": "1",
        "2": "2",
        "3": "3",
        "4": "4",
        "5": "5",
        "6": "6",
        "active": "●",
        "default": "○"
      }
    },

    "hyprland/window": { "format": "{}" },

    // BTC PRICE (10 SECONDS UPDATE)
    "custom/btc": {
      "exec": "~/.config/waybar/scripts/btc_price.sh",
      "interval": 10,
      "format": "{}"
    },
    "custom/ping": {
      "exec": "ping -c 1 -W 1 185.25.182.1 | grep -oP 'time=\\K[0-9.]+' | cut -d '.' -f 1",
      "format": "{} ms",
      "interval": 1,
      "exec-if": "ping -c 1 -W 1 185.25.182.1"
    },
    // COUNTRY FLAG (5 SECONDS UPDATE)
    "custom/country": {
      "exec": "~/.config/waybar/scripts/get_flag.sh",
      "interval": 5
    },

    // MODULE: Weather (Text + Temp)
    "custom/weather": {
      "exec": "~/.config/waybar/scripts/weather_icon.sh",
      "return-type": "json",
      "interval": 3600, // Update once per hour
      "format": "{text}"
    },

    "hyprland/language": {
      "format": "{}",
      "format-lang": "{short}"
    },

    // ИСПРАВЛЕНИЕ: Формат для MEMORY: RAM удален, установлен формат GB
    "memory": {
        "format": "{used:0.1f}GB/{total:0.1f}GB",
        "tooltip": true
    },
    // ИСПРАВЛЕНИЕ: Формат для CPU: убран спецификатор форматирования, вызывавший ошибку
    "cpu": {
        "format": "CPU {usage}%",
        "tooltip": true
    },

    "clock": {
      "format": "{:%H:%M}"
    }
  },

  // Monitor 2: HDMI-A-1 (Secondary)
  {
    "output": "DP-1",
    "layer": "top",
    "position": "top",
    "height": 30, // ИЗМЕНЕНИЕ: Увеличение высоты для устранения сжатия
    "modules-left": ["hyprland/workspaces"],
    "modules-center": [
      "hyprland/window"
    ],
    "modules-right": [
      "memory", // Память на месте
      "cpu",
      "clock"
    ],
    "hyprland/workspaces": {
      "format": "{}",
      "format-window": "{class} {title}",
      "on-click": "activate",
      "all-outputs": true,
      "persistent-workspaces": {
        "HDMI-A-1": [1, 2, 3],
        "DP-1": [4, 5, 6]
      },
      "format-icons": {
        "1": "1",
        "2": "2",
        "3": "3",
        "4": "4",
        "5": "5",
        "6": "6",
        "active": "●",
        "default": "○"
      }
    }
  }
]
