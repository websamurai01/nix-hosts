#!/bin/bash

# –ü–æ–ª—É—á–∞–µ–º –¥–≤—É—Ö–±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã
COUNTRY_CODE=$(curl -s 'http://ip-api.com/line/?fields=countryCode')

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–¥ —Å–æ—Å—Ç–æ–∏—Ç —Ä–æ–≤–Ω–æ –∏–∑ –¥–≤—É—Ö –∑–∞–≥–ª–∞–≤–Ω—ã—Ö –±—É–∫–≤
if ! [[ "$COUNTRY_CODE" =~ ^[A-Z]{2}$ ]]; then
    echo "üè¥‚Äç‚ò†Ô∏è" # –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–∞–≥
    exit 0
fi

# –ú–∞–≥–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –±—É–∫–≤ –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Unicode, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ñ–ª–∞–≥.
# 127397 - —ç—Ç–æ —á–∏—Å–ª–æ–≤–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É ASCII 'A' –∏ —Å–∏–º–≤–æ–ª–æ–º —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ 'A' –≤ Unicode.
char1=$(echo "$COUNTRY_CODE" | cut -c1)
char2=$(echo "$COUNTRY_CODE" | cut -c2)

flag1_dec=$(( $(printf '%d' "'$char1") + 127397 ))
flag2_dec=$(( $(printf '%d' "'$char2") + 127397 ))

# –°–æ–±–∏—Ä–∞–µ–º —Ñ–ª–∞–≥ –∏–∑ –¥–≤—É—Ö —Å–∏–º–≤–æ–ª–æ–≤
FLAG=$(printf "\\U$(printf '%x' $flag1_dec)\\U$(printf '%x' $flag2_dec)")

echo "$FLAG"
